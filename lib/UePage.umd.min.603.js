"use strict";(("undefined"!=typeof self?self:this).webpackChunkUePage=("undefined"!=typeof self?self:this).webpackChunkUePage||[]).push([[603],{8603:(e,t,n)=>{n.r(t),n.d(t,{dealFormMessage:()=>s});n(9375),n(2438),n(2266),n(9819),n(7327);var r=n(403),o=n(4651);const c={"zh-CN":{REQUIRE_ERR_MSG:"此项不能为空",NUMBER_ERR_MSG:"只能输入数字",EMAIL_ERR_MSG:"请输入正确的邮箱",PHONE_ERR_MSG:"请输入正确的手机号",DATE_ERR_MSG:"请输入正确的时间，格式为 2018-09-10 或者 2018-09-10 21:09",CHECK_FORM:"请检查表单后重新提交",SUCCESS:"提交成功",ERROR:"提交失败，出现未知错误",CODE:"验证码"},"en-US":{REQUIRE_ERR_MSG:"This item cannot be empty",NUMBER_ERR_MSG:"Only numbers can be entered",EMAIL_ERR_MSG:"Please enter the correct email",PHONE_ERR_MSG:"Please enter the correct mobile phone number",DATE_ERR_MSG:"Please enter the correct time, the format is 2018-09-10 or 2018-09-10 21:09",CHECK_FORM:"Please check the form and submit it again",SUCCESS:"Submitted successfully",ERROR:"Submission failed, unknown error",CODE:"Verification code"}},i={require:{test:/\S+/,errMsg:"REQUIRE_ERR_MSG"},number:{test:/^[0-9]+$/,errMsg:"NUMBER_ERR_MSG"},email:{test:/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/,errMsg:"EMAIL_ERR_MSG"},phone:{test:/^[1][3,4,5,7,8][0-9]{9}$/,errMsg:"PHONE_ERR_MSG"},date:{test:/^[0-9]{4}-[0-9]{2}-[0-9]{2}(\s[0-9]{2}:[0-9]{2})?$/,errMsg:"DATE_ERR_MSG"}};function s(e,t={}){const n=o(e).find("."+r.A["form-code-img"]),s=n.attr("src"),a=Object.assign({getCodeImgUrl:()=>"",formSubmit:(e,t,n)=>Promise.resolve()},t),l=t.lang||"zh-CN",d=c[l]||c["zh-CN"],f=o(`.${r.A["form-row"]}[data-type="code"]`).find(`.${r.A["form-row_name"]}`),m=f.text();function u(){const e=a.getCodeImgUrl();e&&n.attr("src",e)}f.text("验证码"===m?d.CODE:m),u(),o(e).find(`.${r.A["form-code-img"]}`).on("click",u);const R=o(e).find("."+r.A["form-row"]),p=o(e).find("."+r.A["submit-btn"]),E=o(e).find("."+r.A["form-row--submit"]),g=r.A["form-msg"];function h(e,t){const n=o(e).find("."+g),{msg:r,type:c}=t;r&&n.length?n.text(r):!r||n.length||o(`<div class="${g}" data-type="${c}">${r}</div>`).appendTo(e)}function b(){o(e).find("."+g).remove()}function S(){b(),_();let e=!0;return R.each((function(t,n){const r=o(n).find("input,select,textarea");if(!r?.length)return;let c="";const s=function(e){let t="";return t="checkbox"===e.eq(0).attr("type")?String(e.filter("input[type='checkbox']:checked").val()||""):"radio"===e.eq(0).attr("type")?String(e.filter("input[type='radio']:checked").val()||""):(e.val()||"").toString().trim(),t}(r),a=o(n).data("ruler").split(",");a.includes("require")&&o(a).each((function(t,r){if(i[r]){i[r].test.test(s.trim())||(e=!1,c=d[i[r].errMsg])}t==a.length-1&&c.length&&h(n,{type:"warn",msg:c})}))})),e}function _(e){e?E.attr("data-status",e):E.removeAttr("data-status")}let M=!1;return p.on("click",(()=>{if(M)return;if(!S())return void h(E[0],{type:"warn",msg:d.CHECK_FORM});_("loading");const t=o(e).serializeArray();a.formSubmit(t,function(e){const t={code:"",type:"",content:"<style>table{border-right:#cccccc 1px solid;border-bottom:#cccccc 1px solid;}tr{ margin:0; padding:0}td,th{ border-left:#cccccc 1px solid;border-top:#cccccc 1px solid; margin:0; padding:0 10px; font-size:14px; background:#f8f8f8; color:#666; line-height:30px}</style>"};if("object"!=typeof e)return t;const n={};e.forEach((e=>{const t=e.name;t in n?n[t].value.push(e.value):n[t]={name:t,value:[e.value]}})),t.content+='<table width="600" border="0" cellspacing="0"> <tbody>';for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const r=n[e];"code"==r.name?t.code=r.value[0]:"type"==r.name?t.type=r.value[0]:t.content+="<tr><th>"+r.name+"</th><td>"+(r.value?.toString()||"")+"</td></tr>"}return t.content+="</tbody> </table>",t.content+='<p style="color:#666; font-size:12px">来自&nbsp;&nbsp;'+window.location.host+"</p>",t}(t),{formName:o(e).attr("data-name")||""}).then((()=>{h(E[0],{type:"success",msg:d.SUCCESS}),_("success")}),(e=>{_("error"),h(E[0],{type:"warn",msg:e||d.ERROR})})).finally((()=>{M=!1,u()}))})),{destroy(){M=!1,_(),b(),n.attr("src",s||""),o(e).find(r.A["form-code-img"]).off("click"),p.off("click")}}}}}]);